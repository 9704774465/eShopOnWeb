# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

name: EshopWebApp-test
trigger:
- master
resources: 
  repositories:
    - repository: self
      trigger: none
stages:
  - stage: Build
    jobs:
      - job: Build
        pool: 
         vmImage: ubantu-latest
        steps:
          - task: DotNetCoreCLI@2
            inputs:
              command: 'restore'
              projects: '**/*.sln'
              feedsToUse: 'select'
            displayName: Restore
          - task: DotNetCoreCLI@2
            inputs:
              command: 'build'
              projects: '**/*.sln'
              arguments: '-no--restore'
            displayName: Build
          - task: DotNetCoreCLI@2
            inputs:
              command: 'test'
              projects: 'tests/UnitTests/*.csproj'
            displayName: Unit-Test
          - task: DotNetCoreCLI@2
            inputs:
              command: 'publish'
              publishWebProjects: true
              arguments: '-o $(Build.ArtifactStagingDirectory)'
            displayName: Publish
          - task: PublishBuildArtifacts@1
            inputs:
              PathtoPublish: '$(Build.ArtifactStagingDirectory)'
              ArtifactName: 'RetailApp'
            displayName: Publish-Artifacts
              
          
